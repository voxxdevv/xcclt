<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xcode Web CLT</title>
    <script src="https://kit.fontawesome.com/7eb79cf2e3.js" crossorigin="anonymous"></script>
    
    <link rel="icon" type="image/png" sizes="192x192" href="/ico/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/ico/android-chrome-512x512.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/ico/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/ico/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/ico/favicon-32x32.png">
    <link rel="icon" href="/ico/favicon.ico">
    <link rel="manifest" href="/ico/site.webmanifest">

    <style>
        * {
            box-sizing: border-box;
            font-size: 1rem;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes blink {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0; }
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .cursor {
            background-color: #000000;
            color: #000000;
            animation: blink 1s infinite;
            display: inline-block;
            width: 8px;
            height: 18px;
            margin-bottom: -4px;
            box-shadow: 0 0 2px rgba(0, 0, 0, 0.5);
        }
        #terminal {
            line-height: 1.3;
            animation: fadeIn 1s ease-in-out;
            outline: none;
            white-space: normal;
            overflow-wrap: break-word;
            word-wrap: break-word;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            padding-right:10px;
        }
        .output-line {
            padding: 2px 0;
            animation: slideUp 1s ease-out;
            text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);
        }
        @media screen and (max-width: 768px) {
            #mobile-keyboard-toggle {
                display: block;
            }
            #terminal {
                margin-bottom: 60px;
            }
        }
    </style>
</head>
<body style="text-shadow: 0 0 2px rgba(0, 0, 0, 0.5); margin: 0; padding: 0; font-family: 'Menlo', 'Monaco', monospace; background-color: #000000; color: #FFFFFF;">
    <div style="white-space: normal;overflow-wrap: break-word;word-wrap: break-word; text-shadow: 0 0 2px rgba(0, 0, 0, 0.5); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5), 0 0 2px rgba(0, 0, 0, 0.5); animation: slideDown 1s ease-out; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px; z-index: 10000; position: sticky; margin: 0 auto; margin-bottom: 10px; width: 100%; background-color: #ffffff; color: #000000; top: 0px; padding: 10px;">
        $ <span class="command-span"></span><span id="cursor" class="cursor"></span>
    </div>
    <div id="terminal" style="text-shadow: 0 0 2px rgba(0, 0, 0, 0.5); margin-top: 0; padding: 10px; padding-top: 0px; box-sizing: border-box;">
        <div id="output">
            <div style="text-shadow: 0 0 2px rgba(0, 0, 0, 0.5); color: #7F7F7F;">xcrun: <i class="fa-solid fa-terminal"></i> Xcode Web Command Line Tools (CLT)</div>
            <div style="text-shadow: 0 0 2px rgba(0, 0, 0, 0.5); color: #7F7F7F;">Apple, Xcode, and other trademarks are trademarks of Apple Inc., registered in the U.S. and other countries. This project is not affiliated with or endorsed by Apple. Copyright (c) <script>document.write(new Date().getFullYear());</script> Xcode Web CLT. All rights reserved.</div>
            <div style="text-shadow: 0 0 2px rgba(0, 0, 0, 0.5); color: #7F7F7F;">xcrun version 64 (64).</div>
            <div style="text-shadow: 0 0 2px rgba(0, 0, 0, 0.5); color: #7F7F7F;">Type 'help' for a list of commands.</div>
        </div>
    </div>
    <div id="mobile-keyboard-toggle" style="animation: slideUp 1s ease-out; display: none; position: fixed; bottom: 0px; left: 0px; z-index: 10001; background-color: #ffffff; color: #000000; padding: 10px; box-sizing: content-box; border-top-right-radius: 10px; box-shadow: 0 0 5px rgba(0, 0, 0, 0.5); cursor: pointer;">
        <i class="fa-solid fa-keyboard"></i>
    </div>
    <input type="text" id="mobile-input" style="position: fixed; bottom: -100px; opacity: 0; width: 1px; height: 1px;" />
    
    <script>
        // Terminal state
        const terminal = document.getElementById('terminal');
        const output = document.getElementById('output');
        let commandSpan = document.querySelector('.command-span');
        let currentCommand = '';
        let commandHistory = [];
        let historyIndex = -1;
        let currentDirectory = '/Users/user/Developer';
        let projectCreated = false;
        let currentProject = null;
        let buildSuccess = false;

        // File system simulation
        const fileSystem = {
            '/Users/user/Developer': {
                type: 'directory',
                contents: {}
            }
        };

        // Available Xcode templates
        const xcodeTemplates = [
            'macOS/App',
            'macOS/Command Line Tool',
            'macOS/Framework',
            'macOS/Library',
            'iOS/App',
            'iOS/Framework',
            'iOS/Library',
            'watchOS/App',
            'watchOS/Framework',
            'tvOS/App',
            'tvOS/Framework',
            'Swift Package',
            'Multi-platform/App',
            'Multi-platform/Framework'
        ];
        
        // Template implementations
        const templateImplementations = {
            'macOS/App': {
                files: [
                    {
                        path: 'AppDelegate.swift',
                        content: `import Cocoa\n\n@main\nclass AppDelegate: NSObject, NSApplicationDelegate {\n    @IBOutlet var window: NSWindow!\n\n    func applicationDidFinishLaunching(_ notification: Notification) {\n        // Insert code here to initialize your application\n    }\n\n    func applicationWillTerminate(_ notification: Notification) {\n        // Insert code here to tear down your application\n    }\n\n    func applicationSupportsSecureRestorableState(_ app: NSApplication) -> Bool {\n        return true\n    }\n}\n`
                    },
                    {
                        path: 'ContentView.swift',
                        content: `import SwiftUI\n\nstruct ContentView: View {\n    var body: some View {\n        VStack {\n            Image(systemName: "globe")\n                .imageScale(.large)\n                .foregroundStyle(.tint)\n            Text("Hello, world!")\n        }\n        .padding()\n    }\n}\n\n#Preview {\n    ContentView()\n}\n`
                    },
                    {
                        path: 'Info.plist',
                        content: `<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">\n<plist version="1.0">\n<dict>\n    <key>CFBundleDevelopmentRegion</key>\n    <string>$(DEVELOPMENT_LANGUAGE)</string>\n    <key>CFBundleExecutable</key>\n    <string>$(EXECUTABLE_NAME)</string>\n    <key>CFBundleIdentifier</key>\n    <string>$(PRODUCT_BUNDLE_IDENTIFIER)</string>\n    <key>NSPrincipalClass</key>\n    <string>NSApplication</string>\n</dict>\n</plist>\n`
                    }
                ]
            },
            'iOS/App': {
                files: [
                    {
                        path: 'AppDelegate.swift',
                        content: `import UIKit\n\n@main\nclass AppDelegate: UIResponder, UIApplicationDelegate {\n    var window: UIWindow?\n\n    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {\n        // Override point for customization after application launch.\n        return true\n    }\n}\n`
                    },
                    {
                        path: 'ContentView.swift',
                        content: `import SwiftUI\n\nstruct ContentView: View {\n    var body: some View {\n        VStack {\n            Image(systemName: "heart.fill")\n                .imageScale(.large)\n                .foregroundStyle(.red)\n            Text("Hello, iOS!")\n        }\n        .padding()\n    }\n}\n\n#Preview {\n    ContentView()\n}\n`
                    },
                    {
                        path: 'SceneDelegate.swift',
                        content: `import UIKit\nimport SwiftUI\n\nclass SceneDelegate: UIResponder, UIWindowSceneDelegate {\n    var window: UIWindow?\n\n    func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions) {\n        let contentView = ContentView()\n        \n        if let windowScene = scene as? UIWindowScene {\n            let window = UIWindow(windowScene: windowScene)\n            window.rootViewController = UIHostingController(rootView: contentView)\n            self.window = window\n            window.makeKeyAndVisible()\n        }\n    }\n}\n`
                    }
                ]
            },
            'macOS/Command Line Tool': {
                files: [
                    {
                        path: 'main.swift',
                        content: `// Command Line Tool\nimport Foundation\n\nprint("Hello, World!")\n\nfunc greet(person: String) -> String {\n    let greeting = "Hello, " + person + "!"\n    return greeting\n}\n\n// Test the function\nlet message = greet(person: "Xcode User")\nprint(message)\n\n// Process command line arguments\nlet arguments = CommandLine.arguments\nif arguments.count > 1 {\n    let name = arguments[1]\n    print(greet(person: name))\n}\n`
                    }
                ]
            }
        };

        // Command implementations
        const commands = {
            'help': function() {
                return `
Available commands:
  cd [directory]                  - Change directory
  ls [directory]                  - List directory contents
  pwd                             - Print working directory
  mkdir [directory]               - Create a directory
  rm [-r] [file/directory]        - Remove file or directory
  cat [file]                      - Display file contents
  xcode-select --version          - Display Xcode command line tools version
  xcode-select --print-path       - Print developer directory path
  swift --version                 - Display Swift version
  xcrun --version                 - Display xcrun version
  xcodebuild -version             - Display Xcode version
  xcodebuild -list                - List available schemes (in a project)
  xcodebuild -list -project [project] - List schemes in specified project
  xcodebuild -showsdks            - List available SDKs
  xcode-create [name] [template]  - Create a new Xcode project
  xcode-list-templates            - List available project templates
  xcode-build [project]           - Build a project
  xcode-run [project]             - Build and run a project
  xcode-clean [project]           - Clean a project
  xcode-test [project]            - Run tests for a project
  xcode-open [project]            - Open a project in Xcode (simulated)
  clear                           - Clear the terminal screen
                `;
            },
            'cd': function(args) {
                if (!args || args === '~') {
                    currentDirectory = '/Users/user';
                    return '';
                }
                
                let targetPath = args.startsWith('/') ? args : `${currentDirectory}/${args}`;
                const parts = targetPath.split('/').filter(Boolean);
                const resolvedParts = [];
                for (const part of parts) {
                    if (part === '..') {
                        resolvedParts.pop();
                    } else if (part !== '.') {
                        resolvedParts.push(part);
                    }
                }
                targetPath = '/' + resolvedParts.join('/');
                
                if (getFileSystemObject(targetPath)?.type === 'directory') {
                    currentDirectory = targetPath;
                    return '';
                } else {
                    return `cd: ${args}: No such file or directory`;
                }
            },
            'pwd': function() {
                return currentDirectory;
            },
            'ls': function(args) {
                const path = args || currentDirectory;
                const fsObj = getFileSystemObject(path);
                
                if (!fsObj) {
                    return `ls: ${path}: No such file or directory`;
                }
                
                if (fsObj.type !== 'directory') {
                    return path.split('/').pop();
                }
                
                const contents = fsObj.contents;
                const result = [];
                
                for (const name in contents) {
                    if (contents[name].type === 'directory') {
                        result.push(`<span style="color: #3E9BFF;">${name}/</span>`);
                    } else if (name.endsWith('.swift')) {
                        result.push(`<span style="color: #FF7F50;">${name}</span>`);
                    } else if (name.endsWith('.xcodeproj')) {
                        result.push(`<span style="color: #4169E1;">${name}</span>`);
                    } else if (name.endsWith('.h')) {
                        result.push(`<span style="color: #9370DB;">${name}</span>`);
                    } else if (name.endsWith('.m') || name.endsWith('.mm')) {
                        result.push(`<span style="color: #32CD32;">${name}</span>`);
                    } else {
                        result.push(name);
                    }
                }
                
                return result.join('  ');
            },
            'mkdir': function(args) {
                if (!args) {
                    return 'mkdir: missing operand';
                }
                
                let targetPath = args.startsWith('/') ? args : `${currentDirectory}/${args}`;
                createDirectory(targetPath);
                return '';
            },
            'rm': function(args) {
                if (!args) {
                    return 'rm: missing operand';
                }
                
                const parts = args.split(' ').filter(Boolean);
                let recursive = false;
                let targetPath = parts[0];
                
                if (parts[0] === '-r' || parts[0] === '-rf') {
                    recursive = true;
                    targetPath = parts[1];
                }
                
                if (!targetPath.startsWith('/')) {
                    targetPath = `${currentDirectory}/${targetPath}`;
                }
                
                const fsObj = getFileSystemObject(targetPath);
                if (!fsObj) {
                    return `rm: ${targetPath}: No such file or directory`;
                }
                
                if (fsObj.type === 'directory' && !recursive) {
                    return `rm: ${targetPath}: is a directory`;
                }
                
                const parentPath = targetPath.substring(0, targetPath.lastIndexOf('/'));
                const fileName = targetPath.substring(targetPath.lastIndexOf('/') + 1);
                const parentDir = getFileSystemObject(parentPath);
                
                if (parentDir && parentDir.contents[fileName]) {
                    delete parentDir.contents[fileName];
                    return '';
                } else {
                    return `rm: ${targetPath}: No such file or directory`;
                }
            },
            'xcode-select --version': function() {
                return 'xcode-select version 2412.';
            },
            'xcode-select --print-path': function() {
                return '/Applications/Xcode.app/Contents/Developer';
            },
            'swift --version': function() {
                return 'Apple Swift version 5.8.1 (swiftlang-5.8.0.124.5 clang-1403.0.22.11.100)\nTarget: arm64-apple-macosx13.0';
            },
            'xcrun --version': function() {
                return 'xcrun version 64 (64).';
            },
            'xcodebuild -version': function() {
                return 'Xcode 14.3.1\nBuild version 14E300c';
            },
            'xcodebuild -list': function() {
                if (!projectCreated || !currentProject) {
                    return 'xcodebuild: error: No project was specified and none could be found in the current working directory.';
                }
                
                return `
Information about project "${currentProject}":
    Targets:
        ${currentProject}
        ${currentProject}Tests
        ${currentProject}UITests
    
    Build Configurations:
        Debug
        Release
    
    If no build configuration is specified and -scheme is not passed then "Debug" is used.
    
    Schemes:
        ${currentProject}
`;
            },
            'xcodebuild -showsdks': function() {
                return `
macOS SDKs:
    macOS 13.3                     -sdk macosx13.3
iOS SDKs:
    iOS 16.4                       -sdk iphoneos16.4
iOS Simulator SDKs:
    Simulator - iOS 16.4           -sdk iphonesimulator16.4
tvOS SDKs:
    tvOS 16.4                      -sdk appletvos16.4
tvOS Simulator SDKs:
    Simulator - tvOS 16.4          -sdk appletvsimulator16.4
watchOS SDKs:
    watchOS 9.4                    -sdk watchos9.4
watchOS Simulator SDKs:
    Simulator - watchOS 9.4        -sdk watchsimulator9.4
DriverKit SDKs:
    DriverKit 22.4                 -sdk driverkit22.4
`;
            },
            'xcode-list-templates': function() {
                return 'Available Xcode project templates:\n' + xcodeTemplates.join('\n');
            },
            'xcode-create': function(args) {
                if (!args) {
                    return 'Usage: xcode-create [project_name] [template]\nUse xcode-list-templates to see available templates.';
                }
                
                const parts = args.split(' ');
                const projectName = parts[0];
                const templateArg = parts.slice(1).join(' ');
                
                const template = templateArg || 'macOS/Command Line Tool';
                if (!xcodeTemplates.includes(template)) {
                    return `Template "${template}" not found. Use xcode-list-templates to see available templates.`;
                }
                
                const projectPath = `${currentDirectory}/${projectName}`;
                createDirectory(projectPath);
                
                const projDir = getFileSystemObject(projectPath);
                projDir.contents[`${projectName}.xcodeproj`] = { type: 'file', content: `Xcode project for ${projectName} (${template})` };
                
                const templateImpl = templateImplementations[template] || templateImplementations['macOS/Command Line Tool'];
                
                createDirectory(`${projectPath}/Sources`);
                if (template.includes('App')) {
                    createDirectory(`${projectPath}/Resources`);
                }
                createDirectory(`${projectPath}/Tests`);
                
                const sourcesDir = getFileSystemObject(`${projectPath}/Sources`);
                for (const file of templateImpl.files) {
                    sourcesDir.contents[file.path] = { 
                        type: 'file', 
                        content: file.content
                    };
                }
                
                const testsDir = getFileSystemObject(`${projectPath}/Tests`);
                testsDir.contents[`${projectName}Tests.swift`] = { 
                    type: 'file', 
                    content: `// ${projectName}Tests - Unit Tests\nimport XCTest\n\nfinal class ${projectName}Tests: XCTestCase {\n    func testExample() throws {\n        // This is an example of a functional test case.\n        XCTAssertEqual(1 + 1, 2)\n    }\n\n    func testPerformanceExample() throws {\n        // This is an example of a performance test case.\n        measure {\n            // Put the code you want to measure the time of here.\n        }\n    }\n}\n`
                };
                
                createDirectory(`${projectPath}/.build`);
                projectCreated = true;
                currentProject = projectName;
                
                return `Created ${template} project: ${projectName}\nProject structure initialized at ${projectPath}\n\nUse 'cd ${projectName}' to navigate to the project directory.\nUse 'xcode-build ${projectName}' to build the project.`;
            },
            'xcode-build': function(args) {
                const projectName = args || currentProject;
                
                if (!projectName) {
                    return 'xcodebuild: error: No project was specified and none could be found in the current working directory.';
                }
                
                const projectPath = `${currentDirectory}/${projectName}`;
                const projectDirExists = getFileSystemObject(projectPath)?.type === 'directory';
                const xcodeProjectExists = projectDirExists && getFileSystemObject(projectPath).contents[`${projectName}.xcodeproj`];
                
                if (!projectDirExists || !xcodeProjectExists) {
                    return `xcodebuild: error: project '${projectName}' does not exist.`;
                }
                
                buildSuccess = true;
                
                return `
=== BUILD TARGET ${projectName} OF PROJECT ${projectName} WITH CONFIGURATION Debug ===
Check dependencies
    Swift Compiler - Language Submodule               0.01 seconds
    Swift Compiler - AST Parsing and Generation       0.10 seconds
    Swift Compiler - Type Checking                    0.03 seconds
    Swift Compiler - Semantic Analysis                0.02 seconds
    Swift Compiler - Code Generation                  0.06 seconds
    Swift Compiler - SIL Generation                   0.04 seconds
    Swift Compiler - SIL Processing                   0.01 seconds
    Swift Compiler - LLVM Generation                  0.03 seconds
    Linking and Creation                              0.07 seconds
** BUILD SUCCEEDED ** [0.366 sec]
`;
            },
            'xcode-run': function(args) {
                const projectName = args || currentProject;
                
                if (!projectName) {
                    return 'xcodebuild: error: No project was specified and none could be found in the current working directory.';
                }
                
                const projectPath = `${currentDirectory}/${projectName}`;
                const projectDirExists = getFileSystemObject(projectPath)?.type === 'directory';
                const xcodeProjectExists = projectDirExists && getFileSystemObject(projectPath).contents[`${projectName}.xcodeproj`];
                
                if (!projectDirExists || !xcodeProjectExists) {
                    return `xcodebuild: error: project '${projectName}' does not exist.`;
                }
                
                const buildOutput = commands['xcode-build'](projectName);
                if (!buildSuccess) {
                    return buildOutput;
                }
                
                let outputText = '';
                const sourcesDir = getFileSystemObject(`${projectPath}/Sources`);
                
                if (sourcesDir.contents['main.swift']) {
                    outputText = `Hello, World!\nHello, Xcode User!`;
                } else if (sourcesDir.contents['AppDelegate.swift'] && sourcesDir.contents['ContentView.swift']) {
                    outputText = `
Launching app '${projectName}.app'...
App launched successfully.
`;
                } else {
                    outputText = `
Running ${projectName}...
Program completed successfully.
`;
                }
                
                return `
${buildOutput}
=== RUNNING ${projectName} ===
${outputText}
Program ended with exit code: 0
`;
            },
            'xcode-clean': function(args) {
                const projectName = args || currentProject;
                
                if (!projectName) {
                    return 'xcodebuild: error: No project was specified and none could be found in the current working directory.';
                }
                
                const projectPath = `${currentDirectory}/${projectName}`;
                const projectDirExists = getFileSystemObject(projectPath)?.type === 'directory';
                const xcodeProjectExists = projectDirExists && getFileSystemObject(projectPath).contents[`${projectName}.xcodeproj`];
                
                if (!projectDirExists || !xcodeProjectExists) {
                    return `xcodebuild: error: project '${projectName}' does not exist.`;
                }
                
                return `
=== CLEAN TARGET ${projectName} OF PROJECT ${projectName} WITH CONFIGURATION Debug ===
Check dependencies
Clean.Remove clean build directory "/Users/user/Library/Developer/Xcode/DerivedData/${projectName}-XXXXXXXX/Build/Products/Debug"
    cd ${projectPath}
    builtin-rm -rf /Users/user/Library/Developer/Xcode/DerivedData/${projectName}-XXXXXXXX/Build/Products/Debug
Clean.Remove clean build directory "/Users/user/Library/Developer/Xcode/DerivedData/${projectName}-XXXXXXXX/Build/Intermediates.noindex"
    cd ${projectPath}
    builtin-rm -rf /Users/user/Library/Developer/Xcode/DerivedData/${projectName}-XXXXXXXX/Build/Intermediates.noindex
** CLEAN SUCCEEDED ** [0.124 sec]
`;
            },
            'xcode-test': function(args) {
                const projectName = args || currentProject;
                
                if (!projectName) {
                    return 'xcodebuild: error: No project was specified and none could be found in the current working directory.';
                }
                
                const projectPath = `${currentDirectory}/${projectName}`;
                const projectDirExists = getFileSystemObject(projectPath)?.type === 'directory';
                const xcodeProjectExists = projectDirExists && getFileSystemObject(projectPath).contents[`${projectName}.xcodeproj`];
                
                if (!projectDirExists || !xcodeProjectExists) {
                    return `xcodebuild: error: project '${projectName}' does not exist.`;
                }
                
                return `
=== TEST ${projectName}Tests OF PROJECT ${projectName} WITH CONFIGURATION Debug ===
Test Suite '${projectName}Tests' started at 2023-05-30 10:15:32.123
Test Case '-[${projectName}Tests testExample]' started.
Test Case '-[${projectName}Tests testExample]' passed (0.001 seconds).
Test Case '-[${projectName}Tests testPerformanceExample]' started.
Test Case '-[${projectName}Tests testPerformanceExample]' passed (0.015 seconds).
Test Suite '${projectName}Tests' passed at 2023-05-30 10:15:32.145.
     Executed 2 tests, with 0 failures (0 unexpected) in 0.016 (0.022) seconds
** TEST SUCCEEDED ** [0.135 sec]
`;
            },
            'xcode-open': function(args) {
                const projectName = args || currentProject;
                
                if (!projectName) {
                    return 'xcodebuild: error: No project was specified and none could be found in the current working directory.';
                }
                
                const projectPath = `${currentDirectory}/${projectName}`;
                const projectDirExists = getFileSystemObject(projectPath)?.type === 'directory';
                const xcodeProjectExists = projectDirExists && getFileSystemObject(projectPath).contents[`${projectName}.xcodeproj`];
                
                if (!projectDirExists || !xcodeProjectExists) {
                    return `xcodebuild: error: project '${projectName}' does not exist.`;
                }
                
                return `Opening project ${projectName}.xcodeproj in Xcode... (simulated)`;
            },
            'clear': function() {
                output.innerHTML = '';
                commandSpan.textContent = '';
                currentCommand = '';
                return null;
            },
            'cat': function(args) {
                if (!args) {
                    return 'cat: No file specified';
                }
                
                let filePath = args.startsWith('/') ? args : `${currentDirectory}/${args}`;
                
                const pathParts = filePath.split('/').filter(Boolean);
                let currentPath = '';
                let currentObj = fileSystem;
                
                for (let i = 0; i < pathParts.length; i++) {
                    const part = pathParts[i];
                    
                    if (i === 0) {
                        currentPath = '/' + part;
                    } else {
                        currentPath += '/' + part;
                    }
                    
                    if (i < pathParts.length - 1) {
                        if (!currentObj[part] || currentObj[part].type !== 'directory') {
                            return `cat: ${args}: No such file or directory`;
                        }
                        currentObj = currentObj[part].contents;
                    } else {
                        if (!currentObj[part]) {
                            return `cat: ${args}: No such file or directory`;
                        } else if (currentObj[part].type === 'directory') {
                            return `cat: ${args}: Is a directory`;
                        } else {
                            return `<pre style="white-space: pre-wrap;">${escapeHtml(currentObj[part].content)}</pre>`;
                        }
                    }
                }
                
                return `cat: ${args}: No such file or directory`;
            }
        };

        // Helper functions
        function getFileSystemObject(path) {
            if (!path) return null;
            if (path === '/') {
                return { type: 'directory', contents: fileSystem };
            }
            
            const parts = path.split('/').filter(Boolean);
            let current = fileSystem;
            
            for (let i = 0; i < parts.length; i++) {
                const part = parts[i];
                
                if (!current[part]) {
                    return null;
                }
                
                if (i === parts.length - 1) {
                    return current[part];
                }
                
                if (current[part].type !== 'directory') {
                    return null;
                }
                
                current = current[part].contents;
            }
            
            return null;
        }
        
        function createDirectory(path) {
            if (!path) return;
            
            const parts = path.split('/').filter(Boolean);
            let current = fileSystem;
            
            for (let i = 0; i < parts.length; i++) {
                const part = parts[i];
                
                if (!current[part]) {
                    current[part] = {
                        type: 'directory',
                        contents: {}
                    };
                }
                
                current = current[part].contents;
            }
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        function executeCommand(cmd) {
            const trimmedCmd = cmd.trim();
            if (!trimmedCmd) return;
            
            commandHistory.push(trimmedCmd);
            historyIndex = commandHistory.length;
            
            let result = '';
            let commandFound = false;
            
            if (commands[trimmedCmd]) {
                result = commands[trimmedCmd]();
                commandFound = true;
            } else {
                const parts = trimmedCmd.split(' ');
                const command = parts[0];
                const args = parts.slice(1).join(' ');
                
                if (commands[command]) {
                    result = commands[command](args);
                    commandFound = true;
                }
            }
            
            if (!commandFound) {
                result = `zsh: command not found: ${trimmedCmd.split(' ')[0]}`;
            }
            
            if (result === null) {
                return;
            }
            
            if (result) {
                addNewLine(result);
            }
            
            commandSpan.textContent = '';
            currentCommand = '';
        }
        
        function addNewLine(text) {
            const div = document.createElement('div');
            div.className = 'output-line';
            div.innerHTML = text;
            output.appendChild(div);
            terminal.scrollTop = terminal.scrollHeight;
        }
        
        // Mobile keyboard support
        const mobileInput = document.getElementById('mobile-input');
        const keyboardToggle = document.getElementById('mobile-keyboard-toggle');
        let isVirtualKeyboardActive = false;
        let isMobileInputActive = false;
        
        const isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        if (isMobile) {
            keyboardToggle.style.display = 'block';
        }
        
        keyboardToggle.addEventListener('click', () => {
            isVirtualKeyboardActive = !isVirtualKeyboardActive;
            isMobileInputActive = isVirtualKeyboardActive;
            if (isVirtualKeyboardActive) {
                keyboardToggle.classList.add('active');
                mobileInput.focus();
                terminal.style.height = `${window.innerHeight - 300}px`;
            } else {
                keyboardToggle.classList.remove('active');
                mobileInput.blur();
                terminal.style.height = '100%';
            }
            terminal.scrollTop = terminal.scrollHeight;
        });
        
        mobileInput.addEventListener('input', (e) => {
            if (isMobileInputActive) {
                currentCommand = e.target.value;
                commandSpan.textContent = currentCommand;
                terminal.scrollTop = terminal.scrollHeight;
            }
        });
        
        mobileInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && isMobileInputActive) {
                e.preventDefault();
                executeCommand(currentCommand);
                mobileInput.value = '';
                currentCommand = '';
                commandSpan.textContent = '';
                terminal.scrollTop = terminal.scrollHeight;
            }
        });
        
        terminal.addEventListener('touchstart', (e) => {
            if (isMobile && !isVirtualKeyboardActive) {
                isVirtualKeyboardActive = true;
                isMobileInputActive = true;
                keyboardToggle.classList.add('active');
                mobileInput.focus();
                terminal.style.height = `${window.innerHeight - 300}px`;
                terminal.scrollTop = terminal.scrollHeight;
            }
        });
        
        window.addEventListener('resize', () => {
            if (isVirtualKeyboardActive && isMobile) {
                const keyboardHeight = window.innerHeight < window.outerHeight ? window.outerHeight - window.innerHeight : 300;
                terminal.style.height = `${window.innerHeight - keyboardHeight - 100}px`;
                terminal.scrollTop = terminal.scrollHeight;
            }
        });
        
        terminal.addEventListener('touchmove', (e) => {
            if (isVirtualKeyboardActive && e.target === terminal) {
                e.stopPropagation();
            }
        });
        
        function syncMobileInput() {
            if (isMobileInputActive) {
                mobileInput.value = currentCommand;
            }
        }
        
        document.addEventListener('keydown', function(e) {
            if (isMobile && isMobileInputActive && e.target === mobileInput) {
                return;
            }
            
            terminal.focus();
            
            if (e.key === 'Enter') {
                e.preventDefault();
                executeCommand(currentCommand);
                if (isMobileInputActive) {
                    mobileInput.value = '';
                }
            } else if (e.key === 'Backspace') {
                if (currentCommand.length > 0) {
                    currentCommand = currentCommand.slice(0, -1);
                    commandSpan.textContent = currentCommand;
                    syncMobileInput();
                }
            } else if (e.key === 'ArrowUp') {
                if (historyIndex > 0) {
                    historyIndex--;
                    currentCommand = commandHistory[historyIndex];
                    commandSpan.textContent = currentCommand;
                    syncMobileInput();
                }
                e.preventDefault();
            } else if (e.key === 'ArrowDown') {
                if (historyIndex < commandHistory.length - 1) {
                    historyIndex++;
                    currentCommand = commandHistory[historyIndex];
                    commandSpan.textContent = currentCommand;
                } else if (historyIndex === commandHistory.length - 1) {
                    historyIndex = commandHistory.length;
                    currentCommand = '';
                    commandSpan.textContent = '';
                }
                syncMobileInput();
                e.preventDefault();
            } else if (e.key === 'Tab') {
                e.preventDefault();
                if (currentCommand.length > 0) {
                    const commandParts = currentCommand.split(' ');
                    const lastPart = commandParts[commandParts.length - 1];
                    if (commandParts.length === 1) {
                        const possibleCommands = Object.keys(commands).filter(cmd => 
                            cmd.startsWith(lastPart) && cmd !== lastPart
                        );
                        if (possibleCommands.length === 1) {
                            currentCommand = possibleCommands[0];
                            commandSpan.textContent = currentCommand;
                            syncMobileInput();
                        }
                    } else if (currentCommand.startsWith('cd ') || currentCommand.startsWith('ls ')) {
                        const dirPart = lastPart;
                        const dirObj = getFileSystemObject(currentDirectory);
                        if (dirObj && dirObj.type === 'directory') {
                            const possibleDirs = Object.keys(dirObj.contents).filter(dir => 
                                dir.startsWith(dirPart) && dir !== dirPart
                            );
                            if (possibleDirs.length === 1) {
                                commandParts[commandParts.length - 1] = possibleDirs[0];
                                currentCommand = commandParts.join(' ');
                                commandSpan.textContent = currentCommand;
                                syncMobileInput();
                            }
                        }
                    }
                }
            } else if (e.key.length === 1 && !e.ctrlKey && !e.altKey && !e.metaKey) {
                currentCommand += e.key;
                commandSpan.textContent = currentCommand;
                syncMobileInput();
            }
            
            terminal.scrollTop = terminal.scrollHeight;
        });
        
        terminal.addEventListener('touchend', () => {
            if (isVirtualKeyboardActive) {
                mobileInput.focus();
            }
        });
        
        window.addEventListener('orientationchange', () => {
            if (isVirtualKeyboardActive) {
                setTimeout(() => {
                    terminal.style.height = `${window.innerHeight - 300}px`;
                    terminal.scrollTop = terminal.scrollHeight;
                }, 100);
            }
        });
        
        window.onload = function() {
            commands['cd']('~');
            commands['mkdir']('Developer');
            commands['cd']('Developer');
            
            const cursor = document.getElementById('cursor');
            cursor.style.animation = 'blink 1s infinite';
            
            if (isMobile) {
                mobileInput.value = '';
                keyboardToggle.style.display = 'block';
            }
            
            terminal.focus();
        };
    </script>
    
    <script src="https://cdn.jsdelivr.net/gh/voxxdevv/lmdesigns-watermark@main/watermarkme.min.js"></script>
</body>
</html>
